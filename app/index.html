<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<style>

    #eraser img
    { 
        width: 40px; 
        margin-left: 10px;
        margin-top: 5px;
    }

#eraser{width: fit-content;  position: absolute; left: 80%; top: 1%;}

body{
    background-color: teal;
}

canvas{
    background-color: white;
}

</style>

<body >
   <div style="width:100%; height: 46px;  "><h2 style="font-size: 25px; text-align: center; color:white;">Canvas</h2> </div>

     <div id="eraser" ><img src="images/eraser.png">   </div>

    <canvas id="mycanvas" style="border: 1px red solid"></canvas>

    <div style="color: white;"> Choose Color:-  <input type="color" value="black" onchange="color(this.value)"></div>

    <div style="color: white;"> Brush Size: <input style="width:60vw;  margin-top: 10px;"min="2" max="50" value="2" type="Range" onchange="brushsize(this.value)"> </div>

   
  
    <!-- width="410" height="700" -->
    

    <script>

        const canvas  =document.getElementById("mycanvas")
        const context = canvas.getContext("2d")
        canvas.height= "550" 
        canvas.width="395"
         let isDrawing = true;
         let x = 0;
         let y = 0;
         var drawcolor = ""

         canvas.addEventListener("touchstart", (event) =>
         {
            event.preventDefault();
            x = event.touches[0].clientX;
            y = event.touches[0].clientY;
            isDrawing = true;
         });

         canvas.addEventListener("touchmove", (event) =>
         {
            event.preventDefault();
            if(!isDrawing) return;
            context.beginPath();
            context.moveTo(x,y);
            x = event.touches[0].clientX;
            y = event.touches[0].clientY;
            context.lineCap="round"
            context.lineJoin="round"
            context.lineTo(x, y);
            context.stroke();
         });

         canvas.addEventListener("touchend", (event) =>
         {
            event.preventDefault();
            isDrawing = false;

         });

         var mouseDown = false;
         canvas.addEventListener('mouseDown', function(e)
         {
            mouseDown = true;
            context.beginPath();
            context.moveTo(e.clientX, e.clientY);
         });

         canvas,addEventListener('mouseup', function(e)
         {
            mouseDown= false;
         })

         canvas.addEventListener('mousemove', function(e)
         {
            if(mouseDown)
            {
                context.lineTo(e.clientX, e.clientY);
                context.stroke();

            }
         });

        //  add eraser ruber

      

        eraser.addEventListener('click', function()
        {
            context.clearRect(0, 0, canvas.width, canvas.height);
        });

        // add color for new draw

       function color(c)
       { context.strokeStyle = c
        drawcolor=c

       }

       
       function brushsize(b)
       { context.lineWidth= b
        drawcolor=c

       }

    //    create rubber


     document.write("<p style=' margin-top:15px; color: white; font-size:20px;'>Double Click for Erase")

 
    

    

    var rubber = document.createElement('div');
    rubber.innerHTML = 'Erase on/ off';

    rubber.style.position ='absolute';
    rubber.style.top = '735px';
    rubber.style.left = '7px';
    rubber.style.fontSize='18px';
    rubber.style.backgroundColor = 'white';
    rubber.style.padding = '5px';
    rubber.style.cursor = 'pointer';
    rubber.style.border='0.1vw solid black';
    document.body.appendChild(rubber);

    rubber.addEventListener('click', function()
    {
        if(!isDrawing)
        {
            context.strokeStyle = drawcolor
            isDrawing = true
        }

        else{
            context.strokeStyle="white"
            isDrawing = false
        }
    });



    // saving file

    function savedraw()
    {
        fname=prompt("file name.. File will be saved in png formate", "Mydraw")
        dataURL = canvas.toDataURL();
        link = document.createElement("a");
        link.download =fname
        link.href =dataURL;
        link.click();

    }

    event.preventDefault();

    </script>

    <!-- <h4 style="top: 5vw;">Created By:- Yogesh -->

        <div onclick="savedraw()" style="width: 20%; height: 20px; background-color: white; margin-left: 300px; margin-top: 30px; border:0.1vw solid black; text-align: center;">Save File</div>


    
    
</body>
</html>